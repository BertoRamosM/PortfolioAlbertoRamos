---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const english = {
  name: "",
  link: "https://hatscripts.github.io/circle-flags/flags/gb.svg",
};
const spanish = {
  name: "es",
  link: "https://hatscripts.github.io/circle-flags/flags/es-variant.svg",
};
const catalan = {
  name: "cat",
  link: "https://hatscripts.github.io/circle-flags/flags/es-ct.svg",
};

const french = {
  name: "fr",
  link: "https://hatscripts.github.io/circle-flags/flags/fr.svg",
};

const LanguagesList = [english, spanish, catalan, french];
import { Astronav, Dropdown, DropdownItems } from "astro-navbar";
import ArrowDown from "../icons/ArrowDown.astro";
---

<style>
  @media screen and (max-width: 530px) {
    .nav-link {
      font-size: 0.7rem;
    }
    header > * {
      gap: 1rem;
    }
    @media screen and (max-width: 335px) {
      .nav-link {
        font-size: 0.6rem;
      }
    }
  }
</style>

<header
  class="flex justify-center py-6 sm:py-5 sm:px-10 mx-auto fixed top-0 left-5 right-5 z-50 bg-gray-900 rounded-2xl bg-opacity-75 px-2 max-w-max"
>
  <nav
    class="flex flex-row justify-center items-center gap-x-10 opacity-90 relative"
  >
    <a href="#education" class="hover:underline hover:text-purple-400 nav-link"
      >{t("header.education")}</a
    >
    <a href="#projects" class="hover:underline hover:text-purple-400 nav-link"
      >{t("header.project")}</a
    >
    <a href="#about" class="hover:underline hover:text-purple-400 nav-link"
      >{t("header.about")}</a
    >
    <a href="#contact" class="hover:underline hover:text-purple-400 nav-link"
      >{t("header.contact")}</a
    >

    <Astronav>
      <Dropdown>
        <button class="flex items-center hover:text-purple-300 hover:underline">
          <p class="nav-link py-2">{t("header.language")}</p>
          <ArrowDown />
        </button>
        <DropdownItems>
          <div class="">
            <ul>
              <div class="flex justify-center absolute right-2">
                {
                  LanguagesList.map((language) => (
                    <a class="mx-4 my-1" href={`/${language.name}`}>
                      <img
                        src={language.link}
                        alt={`${language} flag`}
                        class="size-6"
                      />
                    </a>
                  ))
                }
              </div>
              <li></li>
            </ul>
          </div>
        </DropdownItems>
      </Dropdown>
    </Astronav>
  </nav>
</header>
